#! /usr/bin/env node

var fs = require('fs');
var Handlebars = require('handlebars');

var clustersData = JSON.parse(fs.readFileSync('clusterMetaData.json').toString());

var templateData = { clusters: [] };
Object.getOwnPropertyNames(clustersData).forEach(function(clusterId) {
  var clusterData = clustersData[clusterId];
  templateData.clusters.push(clusterData.name);
});

templateData.clusters = templateData.clusters.sort()

var rawTemplate= fs.readFileSync('README.md.handlebars');
var template = Handlebars.compile(rawTemplate.toString());
var data = template(templateData);
fs.writeFileSync('README.md', data);

